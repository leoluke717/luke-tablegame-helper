### 需求文档：多人桌游助手

**文档目的：** 本文档作为项目的功能框架，用于定义、扩展和追踪所有功能模块的开发进度。
**版本：** 1.5
**状态追踪标签：**
* `[待定义]`: 功能已规划，但需求细节尚未讨论。
* `[待开发]`: 需求已清晰，等待技术实现。
* `[开发中]`: 正在进行技术实现。
* `[已完成]`: 功能已实现并通过测试。

---

### 模块一：核心框架 (M1: Core Framework)

本模块定义了支撑整个应用的基础技术和非功能性需求。

| 编号 | 功能点 | 需求描述 | 状态 |
| :--- | :--- | :--- | :--- |
| NFR-1 | 响应式布局 | 助手必须在手机（玩家）和桌面/平板（房主）上均有良好体验。 | `[待开发]` |
| NFR-2 | 实时同步 | 房间状态（如玩家列表、游戏数据）必须在所有客户端实时同步。 | `[已完成]` |
| NFR-3 | 临时会话 | 房间是临时的。当房主断线或关闭浏览器一定时间后，房间应自动解散。 | `[待定义]` |

---

### 模块二：预游戏流程 (M2: Pre-Game Flow)

本模块定义了从打开网页到游戏正式开始之间的所有功能。

#### 2.1 页面：首页 (P-Home)

| 编号 | 功能点 | 需求描述 | 状态 |
| :--- | :--- | :--- | :--- |
| M2.1.1 | 首页视图 | 提供简洁的页面，包含【创建房间】和【加入房间】两个主要按钮。 | `[已完成]` |
| M2.1.2 | 流程-创建 | 点击【创建房间】后，提示用户输入"昵称"，然后进入"大厅"。 | `[已完成]` |
| M2.1.3 | 流程-加入 | 点击【加入房间】后，提示用户输入"房间号"，验证后提示输入"昵称"，然后进入"大厅"。 | `[已完成]` |

#### 2.2 页面：大厅 (P-Lobby)

| 编号 | 功能点 | 需求描述 | 状态 |
| :--- | :--- | :--- | :--- |
| M2.2.1 | 通用-玩家列表 | 实时显示当前房间所有玩家的"昵称"。 | `[已完成]` |
| M2.2.2 | 通用-房主标识 | 玩家列表中，房主（管理员）的昵称旁应有清晰的"👑"或"房主"标识。 | `[已完成]` |
| M2.2.3 | 房主视图-邀请 | 醒目位置显示"房间号"和一个"邀请二维码"（扫码=自动填充房间号）。 | `[已完成]` |
| M2.2.4 | 玩家视图-扫码加入 | 扫描二维码后，自动解析URL参数，弹出昵称输入对话框，确认后直接进入大厅。 | `[已完成]` |
| M2.2.5 | 房主视图-控制 | 必须有一个【开始游戏】按钮，用于通知所有客户端进入游戏。 | `[已完成]` |
| M2.2.6 | 房主视图-管理 | (可选) 房主可以点击玩家昵称，将其【移出房间】。 | `[待定义]` |
| M2.2.7 | 玩家视图-等待 | 隐藏【开始游戏】按钮，显示"等待房主开始游戏..."的状态提示。 | `[已完成]` |
| M2.2.8 | 头像系统-基础功能 | 为所有玩家和房主添加 emoji 头像功能。玩家进入房间或创建房间时，自动分配一个随机 emoji 作为默认头像。头像在玩家列表中昵称旁边显示。 | `[已完成]` |
| M2.2.9 | 头像系统-大厅修改 | 玩家可以在房间内随时修改自己的 emoji 头像。在大厅界面提供便捷的头像修改入口，方便用户自定义个人形象。 | `[已完成]` |
| M2.2.10 | 头像系统-emoji选择器 | 提供精选的常用 emoji 集合供用户选择。emoji 选择器应易于浏览和选择，分类清晰，默认头像从中随机分配。 | `[已完成]` |
| M2.2.11 | 昵称修改-基础功能 | 玩家可以在大厅页面随时修改自己的昵称。提供便捷的修改入口（建议位于玩家信息区域，靠近头像修改按钮），点击后弹出输入框或进入编辑模式。修改后的昵称立即同步到Firebase和所有客户端。修改昵称后房主标识（👑）不应丢失。 | `[已完成]` |
| M2.2.12 | 昵称修改-验证规则 | 昵称验证规则：1）长度限制：2-10个字符；2）字符限制：支持中文、英文、数字、下划线；3）不能为空或只包含空格。提供实时验证反馈，防止无效昵称保存。 | `[已完成]` |

---

### 模块三：游戏助手 (M3: Game Assistant)

本模块是助手的核心功能，**是未来需要填充的主要部分**。

#### 3.1 页面：游戏主界面 (P-Game)

| 编号 | 功能点 | 需求描述 | 状态 |
| :--- | :--- | :--- | :--- |
| M3.1.1 | 界面框架 | 定义游戏界面的基本布局，例如：玩家信息区、公共数据区、操作按钮区。 | `[已完成]` |
| M3.1.2 | 房主特权 | 房主在游戏界面可能拥有特殊操作权限（如修改数据、重置游戏）。 | `[已完成]` |
| M3.1.3 | 退出机制 | 玩家应可以【退出游戏】返回大厅或首页。 | `[已完成]` |

#### 3.2 功能：计分器 (F-Score)

| 编号 | 功能点 | 需求描述 | 状态 |
| :--- | :--- | :--- | :--- |
| M3.2.1 | 分数展示 | 在游戏主界面实时显示所有玩家的当前分数。 | `[待定义]` |
| M3.2.2 | 加减分操作 | 房主（或特定玩家）可以对玩家的分数进行增加或减少。 | `[待定义]` |

#### 3.3 功能：回合管理器 (F-Turn)

| 编号 | 功能点 | 需求描述 | 状态 |
| :--- | :--- | :--- | :--- |
| M3.3.1 | 回合指示 | 清晰地高亮显示“当前回合”的玩家是谁。 | `[待定义]` |
| M3.3.2 | 传递回合 | 玩家可以点击【结束回合】，将回合控制权交给下一位玩家。 | `[待定义]` |

#### 3.4 功能：[在此添加新功能，如：资源管理器、骰子]

| 编号 | 功能点 | 需求描述 | 状态 |
| :--- | :--- | :--- | :--- |
| M3.4.1 | ... | ... | `[待定义]` |

---

### 模块四：游戏后流程 (M4: Post-Game)

本模块定义了游戏结束后的功能。

| 编号 | 功能点 | 需求描述 | 状态 |
| :--- | :--- | :--- | :--- |
| M4.1.1 | 结果展示 | 游戏结束后，显示一个“胜利者”或“最终得分”的摘要页面。 | `[待定义]` |
| M4.1.2 | 再来一局 | 房主可以【再来一局】（重置游戏数据）或【解散房间】（所有人返回首页）。 | `[待定义]` |

---

### 如何使用这个框架？

1.  **追踪进度：** 当你开始开发时，你把 M2.1.1 的状态从 `[待开发]` 改成 `[开发中]`，完成后改成 `[已完成]`。
2.  **扩展功能：** 当你想到计分器不够，还需要一个“资源管理器”时，你就可以在 `模块三` 下面新增一个 `3.4 功能：资源管理器`，并定义 `M3.4.1`、`M3.4.2`...